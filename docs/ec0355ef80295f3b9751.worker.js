!function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=3)}([/*!******************************!*\
  !*** ./~/tslib/tslib.es6.js ***!
  \******************************/
function(e,t,n){"use strict";function r(e,t){function n(){this.constructor=e}g(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&(n[r[o]]=e[r[o]]);return n}function a(e,t,n,r){var o,a=arguments.length,i=a<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(i=(a<3?o(i):a>3?o(t,n,i):o(t,n))||i);return a>3&&i&&Object.defineProperty(t,n,i),i}function i(e,t){return function(n,r){t(n,r,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,r){return new(n||(n=Promise))(function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(i,s)}u((r=r.apply(e,t||[])).next())})}function d(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,a&&(i=a[2&n[0]?"return":n[0]?"throw":"next"])&&!(i=i.call(a,n[1])).done)return i;switch(a=0,i&&(n=[0,i.value]),n[0]){case 0:case 1:i=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,a=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(i=u.trys,!(i=i.length>0&&i[i.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!i||n[1]>i[0]&&n[1]<i[3])){u.label=n[1];break}if(6===n[0]&&u.label<i[1]){u.label=i[1],i=n;break}if(i&&u.label<i[2]){u.label=i[2],u.ops.push(n);break}i[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],a=0}finally{o=i=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,a,i,s,u={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function c(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function l(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function x(e){return this instanceof x?(this.v=e,this):new x(e)}function I(e,t,n){function r(e){c[e]&&(d[e]=function(t){return new Promise(function(n,r){l.push([e,t,n,r])>1||o(e,t)})})}function o(e,t){try{a(c[e](t))}catch(e){u(l[0][3],e)}}function a(e){e.value instanceof x?Promise.resolve(e.value.v).then(i,s):u(l[0][2],e)}function i(e){o("next",e)}function s(e){o("throw",e)}function u(e,t){e(t),l.shift(),l.length&&o(l[0][0],l[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,c=n.apply(e,t||[]),l=[];return d={},r("next"),r("throw"),r("return"),d[Symbol.asyncIterator]=function(){return this},d}function h(e){function t(t,o){e[t]&&(n[t]=function(n){return(r=!r)?{value:x(e[t](n)),done:"return"===t}:o?o(n):n})}var n,r;return n={},t("next"),t("throw",function(e){throw e}),t("return"),n[Symbol.iterator]=function(){return this},n}function y(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof l?l(e):e[Symbol.iterator]()}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=r,n.d(t,"__assign",function(){return v}),t.__rest=o,t.__decorate=a,t.__param=i,t.__metadata=s,t.__awaiter=u,t.__generator=d,t.__exportStar=c,t.__values=l,t.__read=f,t.__spread=p,t.__await=x,t.__asyncGenerator=I,t.__asyncDelegator=h,t.__asyncValues=y;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}},/*!************************!*\
  !*** ./src/indexes.js ***!
  \************************/
function(e,t,n){"use strict";function r(e,n){e=u.__assign({},e);for(var r=0,o=n;r<o.length;r++){var a=o[r];a.note&&(e.notes=t.notesIndexer.update(e.notes,[a.note])),a.notes&&(e.notes=t.notesIndexer.update(e.notes,a.notes)),a.terms&&(e.terms=t.termsIndexer.update(e.terms,a.terms)),a.clozes&&(e.clozes=t.clozesIndexer.update(e.clozes,a.clozes)),a.clozeAnswers&&(e.clozeAnswers=t.clozeAnswersIndexer.update(e.clozeAnswers,a.clozeAnswers))}return e}function o(e,t){var n=d.Indexer.getFirstMatching(e.notes.byId,[t]);if(n){return{note:n,terms:d.Indexer.getAllMatching(e.terms.byNoteIdReferenceAndMarker,[t]),clozes:d.Indexer.getAllMatching(e.clozes.byNoteIdReferenceMarkerAndClozeIdx,[t]),clozeAnswers:d.Indexer.getAllMatching(e.clozeAnswers.byNoteIdReferenceMarkerClozeIdxAndAnswerIdx,[t])}}}function a(e){for(var t=e.note,n=e.terms,r=e.clozes,o=e.clozeAnswers,a=u.__assign({},t,{attributes:u.__assign({},t.attributes,{terms:[]}),id:void 0,version:void 0,localEdits:void 0,path:void 0,hasConflicts:void 0}),i=0,s=0,d=0,c=n;d<c.length;d++){var l=c[d],f=u.__assign({},l,{attributes:u.__assign({},l.attributes,{clozes:[]}),noteId:void 0,language:void 0});for(a.attributes.terms.push(f);i<r.length;++i){var p=r[i];if(p.reference!==l.attributes.reference||p.marker!==l.attributes.marker||p.noteId!==l.noteId)break;for(var x=u.__assign({},p,{attributes:u.__assign({},p.attributes,{answers:[]}),noteId:void 0,reference:void 0,marker:void 0,clozeIdx:void 0,language:void 0});s<o.length;++s){var I=o[s];if(I.reference!==p.reference||I.marker!==p.marker||I.noteId!==p.noteId||I.clozeIdx!==p.clozeIdx)break;x.attributes.answers.push(I.answer)}f.attributes.clozes.push(x)}}return a}function i(e,t,n,r){for(var o=u.__assign({},e,{attributes:u.__assign({},e.attributes,{terms:void 0}),id:t,path:n,version:r,localEdits:!1,hasConflicts:!1}),a=[],i=[],s=[],d={note:o,terms:a,clozes:i,clozeAnswers:s},c=0,l=e.attributes.terms;c<l.length;c++){var f=l[c],p=u.__assign({},f,{attributes:u.__assign({},f.attributes,{clozes:void 0}),language:o.attributes.language,noteId:o.id});a.push(p);for(var x=0;x<f.attributes.clozes.length;++x){var I=f.attributes.clozes[x],h=u.__assign({},I,{clozeIdx:x,marker:p.attributes.marker,reference:p.attributes.reference,language:o.attributes.language,noteId:o.id});i.push(h);for(var y=0;y<I.attributes.answers.length;++y){var g=I.attributes.answers[y],v={answer:g,answerIdx:y,clozeIdx:x,marker:p.attributes.marker,reference:p.attributes.reference,language:o.attributes.language,noteId:o.id};s.push(v)}}}return d}function s(e,n){e=u.__assign({},e),e.notes=t.notesIndexer.removeAll(e.notes,[n]);var r=d.Indexer.getAllMatching(e.terms.byNoteIdReferenceAndMarker,[n.id]);e.terms=t.termsIndexer.removeAll(e.terms,r);var o=d.Indexer.getAllMatching(e.clozes.byNoteIdReferenceMarkerAndClozeIdx,[n.id]);e.clozes=t.clozesIndexer.removeAll(e.clozes,o);var a=d.Indexer.getAllMatching(e.clozeAnswers.byNoteIdReferenceMarkerClozeIdxAndAnswerIdx,[n.id]);return e.clozeAnswers=t.clozeAnswersIndexer.removeAll(e.clozeAnswers,a),e}Object.defineProperty(t,"__esModule",{value:!0});var u=n(/*! tslib */0),d=n(/*! redux-indexers */2);t.notesIndexer=new d.Indexer("byPath"),t.notesIndexer.addIndex("byPath",function(e){return e.path.split("/")}),t.notesIndexer.addIndex("byId",function(e){return[e.id]}),t.notesIndexer.addIndex("byLanguage",function(e){return[e.attributes.language]}),t.notesIndexer.addIndex("byHasLocalEdits",function(e){return[e.localEdits]}),t.notesIndexer.addIndex("byHasConflicts",function(e){return[e.hasConflicts]}),t.notesIndexer.addIndex("byEditsComplete",function(e){return[e.attributes.editsComplete]}),t.termsIndexer=new d.Indexer("byNoteIdReferenceAndMarker"),t.termsIndexer.addIndex("byNoteIdReferenceAndMarker",function(e){return[e.noteId,e.attributes.reference,e.attributes.marker]}),t.termsIndexer.addIndex("byLanguage",function(e){return[e.language]}),t.clozesIndexer=new d.Indexer("byNoteIdReferenceMarkerAndClozeIdx"),t.clozesIndexer.addIndex("byNoteIdReferenceMarkerAndClozeIdx",function(e){return[e.noteId,e.reference,e.marker,e.clozeIdx]}),t.clozesIndexer.addIndex("byLanguageAndNextDue",function(e){return[e.language,e.attributes.schedule.nextDueMinutes]}),t.clozeAnswersIndexer=new d.Indexer("byNoteIdReferenceMarkerClozeIdxAndAnswerIdx"),t.clozeAnswersIndexer.addIndex("byNoteIdReferenceMarkerClozeIdxAndAnswerIdx",function(e){return[e.noteId,e.reference,e.marker,e.clozeIdx,e.answerIdx]}),t.clozeAnswersIndexer.addIndex("byLanguageAndAnswered",function(e){return[e.language,e.answer[0]]}),t.clozeAnswersIndexer.addGroupedIndex("byLanguageAndFirstAnsweredOfNoteIdReferenceMarkerAndClozeIdx",function(e){return[e.language,e.answer[0]]},"byNoteIdReferenceMarkerClozeIdxAndAnswerIdx",function(e){return[e.noteId,e.reference,e.marker,e.clozeIdx]},function(e,t){return e()}),t.indexesInitialState={notes:t.notesIndexer.empty(),terms:t.termsIndexer.empty(),clozes:t.clozesIndexer.empty(),clozeAnswers:t.clozeAnswersIndexer.empty()},t.loadIndexables=r,t.findNoteTree=o,t.normalizedNote=a,t.denormalizedNote=i,t.removeNote=s},/*!***********************************!*\
  !*** ./~/redux-indexers/index.js ***!
  \***********************************/
function(e,t,n){"use strict";function r(e,t,n,r,o){void 0===r&&(r=0),void 0===o&&(o=e.length);for(var a,i;r<o;)a=r+o>>>1,i=n(t,e[a]),i>0?r=a+1:o=a;return r}function o(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n],o=t[n];if(r!==o)return o===1/0?-1:r===1/0?1:null==r?-1:null==o?1:r<o?-1:1}return e.length===t.length?0:e.length>t.length?1:-1}function a(e,t){return e-t}function i(e,t){return o(e,t[0])}function s(e,t){for(var n=[],r=0,o=t;r<o.length;r++){var a=o[r],i=e(a),s=d.getRangeFrom(n,i,i.concat([null])),u=s.startIdx,c=s.endIdx;n.splice(u,c-u,[i,a])}return n}Object.defineProperty(t,"__esModule",{value:!0});var u=n(/*! tslib */0);t.bisect=r,t.arrayCmp=o,t.numberCmp=a;var d=function(){function e(e){this.mainIndexName=e,this.indexKeyers={},this.indexDependentGroup={},this.indexGroupKeyers={},this.indexReducers={},this.indexes=[]}return e.prototype.addIndex=function(e,t){if(e in this.indexKeyers)throw new Error("duplicate definition for index "+e);this.indexKeyers[e]=t,this.indexes.push(e)},e.prototype.addGroupedIndex=function(e,t,n,r,o){if(!this.indexKeyers[n])throw new Error("Dependent index "+n+" should be defined before "+e);this.addIndex(e,t),this.indexDependentGroup[e]=n,this.indexGroupKeyers[e]=r,this.indexReducers[e]=o},e.prototype.matchesInitialState=function(e){return this._empty===e},e.prototype.empty=function(){if(this._empty)return this._empty;var e=this._empty={};for(var t in this.indexKeyers)e[t]=[];return e},e.prototype.removeAll=function(e,t){return this.splice(e,t,[])},e.prototype.removeByPk=function(t,n){return this.removeAll(t,e.getAllMatching(t[this.mainIndexName],n))},e.prototype.update=function(e,t){var n=this,r=[],o=[];return s(this.indexKeyers[this.mainIndexName],t).forEach(function(t){var a=n.getByPk(e,t[0]);a&&r.push(a),o.push(t[1])}),this.splice(e,r,o)},e.iterator=function(t,n,r){void 0===n&&(n=null),void 0===r&&(r=null);var o=e.getRangeFrom(t,n,r),a=o.startIdx,i=o.endIdx,s=a;return function(){return s<i?t[s++][1]:null}},e.reverseIter=function(t,n,r){void 0===n&&(n=null),void 0===r&&(r=null),n&&(n=n.concat([void 0])),r&&(r=r.concat([void 0]));var o=e.getRangeFrom(t,r,n),a=o.startIdx,i=o.endIdx,s=i;return function(){return s>a?t[--s][1]:null}},e.getAllMatching=function(t,n){var r=e.getRangeFrom(t,n,n.concat([1/0])),o=r.startIdx,a=r.endIdx;return t.slice(o,a).map(function(e){e[0];return e[1]})},e.prototype.getByPk=function(t,n){return e.getFirstMatching(t[this.mainIndexName],n)},e.getRangeFrom=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=null);var o,a;return o=null==t?0:r(e,t,i),a=null==n?e.length:r(e,n,i),{startIdx:o,endIdx:a}},e.getFirstMatching=function(t,n){return e.iterator(t,n,n.concat([1/0]))()},e.prototype.splice=function(t,n,r){var o=t;if(!n.length&&!r.length)return t;t=u.__assign({},t);for(var a=0,i=this.indexes;a<i.length;a++){var d=i[a],c=t[d],l=n,f=r,p=this.indexDependentGroup[d];if(p){var x=this.indexGroupKeyers[d],I=this.indexReducers[d],h=s(x,l.concat(f));l=[],f=[];for(var y=0,g=h;y<g.length;y++){var v=g[y],b=v[0],m=o[p],_=e.iterator(m,b,b.concat([1/0])),w=e.reverseIter(m,b.concat([1/0]),b),z=I(_,w),A=t[p];_=e.iterator(A,b,b.concat([1/0])),w=e.reverseIter(A,b.concat([1/0]),b);var k=I(_,w);z!==k&&(z&&l.push(z),k&&f.push(k))}}if(f.length||l.length){c=t[d]=t[d].slice();for(var M=0,O=l;M<O.length;M++){var R=O[M];this.removeFromIndex(c,d,R)}for(var N=0,P=f;N<P.length;N++){var R=P[N];this.addToIndex(c,d,R)}}}return t},e.prototype.strictValueKeyOf=function(e,t){var n=this.indexKeyers[this.mainIndexName](t);if(e===this.mainIndexName)return n;var r=this.indexKeyers[e](t);return Array.prototype.push.apply(r,n),r},e.prototype.addToIndex=function(t,n,r){var o=this.strictValueKeyOf(n,r),a=e.getRangeFrom(t,o).startIdx;t.splice(a,0,[o,r])},e.prototype.removeFromIndex=function(t,n,r){var o=this.strictValueKeyOf(n,r),a=e.getRangeFrom(t,o,o.concat([null])),i=a.startIdx,s=a.endIdx;t.splice(i,s-i)},e}();t.Indexer=d},/*!********************************!*\
  !*** ./src/services/worker.js ***!
  \********************************/
function(e,t,n){"use strict";function r(e){return o.loadIndexables(o.indexesInitialState,e)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(/*! ../indexes */1);"function"==typeof importScripts&&(self.onmessage=function(e){var t=e.data;self.postMessage(r(t))}),t.doIndexesLoadingWork=r}]);